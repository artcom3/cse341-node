<!DOCTYPE html>
<html>
<head>
    <title>
        <%= title %>
    </title>
    <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css" />
    <link rel="stylesheet" href="/css/p08.css">
</head>

<body>

    <div class="jumbotron text-center">
        <div class="container">
            <h1>
                <%= title %>
            </h1>
        </div>
    </div>
    <div class="container">
        <% if (products.length> 0) { %>
        <h2>Product Listing</h2>
        <form action="/p08/search" method="get">
            <input type="text" name="query" id="query">
            <button type="submit">Search</button>
        </form>
        <div class="product-container">
            <% for (product of products) { %>
            <div class="product">
                <div>
                    <h3>
                        <%= product.name %> - $<%= product.price %>
                    </h3>
                    <div class="product-image">
                        <img src="<%= product.imageUrl %>" alt="<%= product.name %>">
                    </div>
                </div>
                <div>
                    <p>
                        <%= product.description %>
                    </p>
                    <p>Tags: <%= product.tags.join(", ") %></p>
                </div>
            </div>
            <% } %>
        </div>
        <section class="pagination">
            <a href="?page=1">First</a>
            <% for(var i=1; i <=numPages; i++) { %>
                <a href="?page=<%= i %><%= (query) ? `&query=${query}` :  '' %>" class="btn <%= (page==i) ? 'btn-primary' : 'btn-default' %>">
                  <%= i %>
                </a>
            <% } %>
            <a href="?page=<%= numPages %>">Last</a>
        </section>
        <% } else { %>
        <h2>No Products Found!</h2>
        <% } %>
    </div>


</body>

</html>